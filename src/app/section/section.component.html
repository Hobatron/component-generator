<div class="section-page">
  <header class="section-header">
    <div class="breadcrumb">
      <a routerLink="/" class="breadcrumb-link">Home</a>
      <span class="breadcrumb-separator">â€º</span>
      <a [routerLink]="'/projects/' + (projectName$ | async)" class="breadcrumb-link">
        {{ projectName$ | async | titlecase }}
      </a>
      <span class="breadcrumb-separator">â€º</span>
      <span class="breadcrumb-current">{{ sectionName$ | async | titlecase }}</span>
    </div>

    <div class="section-title-area">
      <h1 class="section-title">
        <span class="section-icon">
          @switch (sectionName$ | async) { @case ('actions') { âš”ï¸ } @case ('equipments') { ğŸ›¡ï¸ }
          @case ('usables') { ğŸ§ª } @case ('characters') { ğŸ‘¤ } @case ('spells') { âœ¨ } @default { ğŸ“
          } }
        </span>
        {{ sectionName$ | async | titlecase }}
      </h1>
      <p class="section-description">
        Manage {{ sectionName$ | async }} for {{ projectName$ | async | titlecase }}
      </p>
    </div>

    <div class="section-actions">
      <button class="action-button primary" (click)="openAddModal()">
        <span class="button-icon">â•</span>
        Add New {{ sectionName$ | async | titlecase }}
      </button>
      <button class="action-button secondary">
        <span class="button-icon">ğŸ“¤</span>
        Export
      </button>
    </div>
  </header>

  <main class="section-content">
    <div class="items-grid">
      @for (item of sectionItems$ | async; track item.id) {
      <div class="item-card">
        <div class="item-header">
          <h3 class="item-title">
            @if (sectionName$ | async; as section) { @switch (section) { @case ('actions') {
            {{ item.type }} #{{ item.id }}
            } @case ('equipments') {
            {{ item.name }}
            } @case ('usables') {
            {{ item.name }}
            } @default {
            {{ item.name || item.type || 'Unnamed Item' }}
            } } }
          </h3>
          <div class="item-actions">
            <button class="item-action-btn edit" title="Edit" (click)="openEditModal(item)">
              âœï¸
            </button>
            <button class="item-action-btn delete" title="Delete">ğŸ—‘ï¸</button>
          </div>
        </div>

        <div class="item-content">
          <p class="item-description">
            {{ item.rules || 'No rules available' }}
          </p>

          <div class="item-tags">
            @if (item.type) {
            <span class="item-tag type">{{ item.type }}</span>
            } @if (item.cost) {
            <span class="item-tag cost">Cost: {{ item.cost }}</span>
            } @if (item.slot) {
            <span class="item-tag slot">Slot: {{ item.slot }}</span>
            }
          </div>
        </div>

        <div class="item-footer">
          <span class="item-meta">ID: {{ item.id }}</span>
        </div>
      </div>
      } @empty {
      <div class="empty-state">
        <div class="empty-icon">ğŸ“­</div>
        <h3>No {{ sectionName$ | async }} found</h3>
        <p>Get started by adding your first {{ sectionName$ | async | titlecase }}.</p>
        <button class="action-button primary" (click)="openAddModal()">
          <span class="button-icon">â•</span>
          Add {{ sectionName$ | async | titlecase }}
        </button>
      </div>
      }
    </div>
  </main>

  <!-- Card Edit Modal -->
  @if (sectionName$ | async; as sectionName) {
  <app-card-edit-modal
    [isOpen]="isModalOpen()"
    [item]="editingItem()"
    [itemType]="sectionName"
    (close)="closeModal()"
    (save)="saveItem($event)"
  />
  }
</div>
